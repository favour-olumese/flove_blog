{% extends 'blog/base.html' %}

{% block title %}
    <title>
        {% if article_status == 'p' %}
            {{ writer }} Public Articles 

        {% elif article_status == 'u' %}
            {{ writer }} Unlisted Articles 

        <!-- All article is controlled by a view
            that does not have the writer context. -->
        {% else %}
            {{ request.user.writer }} Articles 
        {% endif %}
        | Flove
    </title>
{% endblock %}

{% block content %}

    <!-- For filtering articles -->
    <form action="{% url 'filter' %}" method="get">
        <select name="article_status" id="filter">
            <option value="p">Public</option>

            <option value="u" {% if article_status == 'u' %}
            selected="selected"{% endif %}>Unlisted</option>

            <option value="a" {% if article_status == None %}
            selected="selected"{% endif %}>All Published</option>

        </select>

        <input type="submit" value="Submit">
    </form>

    {% for article in my_articles %}
    <div style="border-style: solid;">
        <a href="{{ article.get_absolute_url }}">
            <p>{{ article.title }}</p>
        </a>
        <small>{{ article.writer }}</small>
        <small>{{ article.get_article_status_display }}</small>

        {% if request.user == article.writer.user %}
            <a href="{% url 'update-article' article.writer.user article.article_url %}">Update</a>
            <a href="{% url 'delete-article' article.writer.user article.article_url %}">Delete</a>
        {% endif %}
    </div>

    {% empty %}
        <p>There are no articles</p>
    {% endfor %}
{% endblock %}