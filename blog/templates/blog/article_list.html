{% extends 'blog/base.html' %}

{% block title %}
    <title>Articles | Flove</title>
{% endblock %}

{% block content %}

<a href="{% url 'new-article' %}">Write</a>
{% for article in article_list %}
    <div style="border-style: solid;">
        <a href="{{ article.get_absolute_url }}">
            <p>{{ article.title }}</p>
        </a>
        <small>{{ article.writer }}</small>
        <small>{{ article.get_article_status_display }}</small>

        <!-- Save/Unsave Article -->
        <form class="save-form">
            {% csrf_token %}
            <input class="article_id" type="hidden" name="article_id" value="{{ article.id }}">

            <input id="save-button" type="submit"
            value="{% if article in request.user.writer.saved_articles.all %}Unsave{% else %}Save{% endif %}">

            <div id="save-form-url" data-save_form_url="{% url 'save-article' article.writer.user article.article_url %}"></div>
        </form>

        {% if request.user.writer.id == article.writer.id %}
            <a href="{% url 'update-article' article.writer.user article.article_url %}">Update</a>
            <a href="{% url 'delete-article' article.writer.user article.article_url %}">Delete</a>
        {% endif %}
    </div>

{% empty %}
    <p>There are no articles</p>

{% endfor %}
    <div id="check-authenticaton", data-check_authentication="{{ user.is_authenticated|lower }}"></div>
    <div id="login-page-redirect" data-login_page_redirect="{% url 'login' %}?next={{ request.path }}"></div>
{% endblock %}